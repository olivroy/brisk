<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Random Weights • brisk</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Random Weights">
<meta property="og:description" content="brisk">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brisk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/random_weights.html">Random Weights</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rich-payne/brisk/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="random_weights_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Random Weights</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rich-payne/brisk/blob/HEAD/vignettes/random_weights.Rmd" class="external-link"><code>vignettes/random_weights.Rmd</code></a></small>
      <div class="hidden name"><code>random_weights.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="random-weights">Random Weights<a class="anchor" aria-label="anchor" href="#random-weights"></a>
</h2>
<p>When doing a quantitative benefit/risk analysis, it may be of interest to add some uncertainty around the weights. If this is the case, one can specify a vector of weights in lieu of a single weight:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rich-payne.github.io/brisk">brisk</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="va">benefit_fun</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/approxfun.html" class="external-link">approxfun</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">risk_fun</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/approxfun.html" class="external-link">approxfun</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span>, <span class="fl">0.6</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.9</span>, <span class="fl">0.2</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># weights</span></span>
<span><span class="va">w1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">0.6</span>, <span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">w2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1132</span><span class="op">)</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/br.html">br</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/br.html">benefit</a></span><span class="op">(</span><span class="st">"response"</span>, <span class="va">benefit_fun</span>, weight <span class="op">=</span> <span class="va">w1</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/br.html">risk</a></span><span class="op">(</span><span class="st">"side_effect"</span>, <span class="va">risk_fun</span>, weight <span class="op">=</span> <span class="va">w2</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/br_group.html">br_group</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"placebo"</span>,</span>
<span>    response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">30</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">70</span><span class="op">)</span>,</span>
<span>    side_effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">3</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">97</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/br_group.html">br_group</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"drug"</span>,</span>
<span>    response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">60</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">40</span><span class="op">)</span>,</span>
<span>    side_effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">40</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">60</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">out</span>, <span class="va">iter</span>, <span class="va">response_weight</span>, <span class="va">side_effect_weight</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;    iter response_weight side_effect_weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1           0.684              0.209</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2           0.646              0.256</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3           0.604              0.210</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4           0.699              0.280</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5           0.769              0.272</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     6           0.672              0.297</span></span></code></pre></div>
<p>In some cases is may be desirable to have weights which sum to 1 (e.g. when using the <code><a href="../reference/br.html">mcda()</a></code> function). If this is the case, one can use the <code><a href="../reference/sim_weights.html">sim_weights()</a></code> function to generate a set of weights which sums to 1. One needs to provide the number of weights to generate, and upper/lower bounds for each endpoint. The function then generates weights using the bounds. For instance, the following code will generate weights such that the ratio of side effect to response is from 0.2 to 0.3:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_weights.html">sim_weights</a></span><span class="op">(</span><span class="fl">1e4</span>, response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, side_effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   response side_effect</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    0.778       0.222</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>    0.813       0.187</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>    0.801       0.199</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>    0.793       0.207</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>    0.789       0.211</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>    0.777       0.223</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">w</span><span class="op">$</span><span class="va">side_effect</span> <span class="op">/</span> <span class="va">w</span><span class="op">$</span><span class="va">response</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;  0.2000  0.2237  0.2477  0.2486  0.2730  0.3000</span></span></code></pre></div>
<p>These weights can then be used in the benefit-risk analyses:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/br.html">br</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/br.html">benefit</a></span><span class="op">(</span><span class="st">"response"</span>, <span class="va">benefit_fun</span>, weight <span class="op">=</span> <span class="va">w</span><span class="op">$</span><span class="va">response</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/br.html">risk</a></span><span class="op">(</span><span class="st">"side_effect"</span>, <span class="va">risk_fun</span>, weight <span class="op">=</span> <span class="va">w</span><span class="op">$</span><span class="va">side_effect</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/br_group.html">br_group</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"placebo"</span>,</span>
<span>    response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">30</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">70</span><span class="op">)</span>,</span>
<span>    side_effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">3</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">97</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/br_group.html">br_group</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"drug"</span>,</span>
<span>    response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">60</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">40</span><span class="op">)</span>,</span>
<span>    side_effect <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">40</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">60</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">out2</span>, <span class="va">iter</span>, <span class="va">response_weight</span>, <span class="va">side_effect_weight</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;    iter response_weight side_effect_weight</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1           0.778              0.222</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2           0.813              0.187</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3           0.801              0.199</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     4           0.793              0.207</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5           0.789              0.211</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     6           0.777              0.223</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Richard Payne.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
